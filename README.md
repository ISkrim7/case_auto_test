# æŽ¥å£&UIè‡ªåŠ¨åŒ–å¹³å°

[![FastAPI](https://img.shields.io/badge/FastAPI-blue)](https://www.python.org/)
[![Python](https://img.shields.io/badge/Python-3.12%2B-blue)](https://www.python.org/)
[![Httpx](https://img.shields.io/badge/Httpx-blue)](https://www.python-httpx.org/)
[![PlayWright](https://img.shields.io/badge/PlayWright-blue)](https://playwright.dev/python/docs/api/class-playwright)
[![Mysql](https://img.shields.io/badge/Mysql-blue)]()
[![Redis](https://img.shields.io/badge/Redis-blue)]()


---

## ðŸš€ åŠŸèƒ½ç‰¹ç‚¹

### æŽ¥å£è‡ªåŠ¨åŒ–èƒ½åŠ›

âœ¨ **æ ¸å¿ƒåŠŸèƒ½**ï¼š

- **åŸºç¡€ HTTP è¯·æ±‚**ï¼šæ”¯æŒå¤šç§ HTTP è¯·æ±‚ç±»åž‹ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰ã€‚
- **å˜é‡æå–ä¸Žå†™å…¥**ï¼šå¯ä»Žå“åº”ä¸­æå–å˜é‡ï¼Œæ”¯æŒåœ¨åŽç»­è¯·æ±‚ä¸­ä½¿ç”¨ã€‚
- **æ–­è¨€åŠŸèƒ½**ï¼šæä¾›å“åº”çŠ¶æ€ç ã€å†…å®¹ç­‰å¤šç§æ–­è¨€éªŒè¯ã€‚
- **å‰åŽç½®è„šæœ¬**ï¼šåœ¨ç”¨ä¾‹æ‰§è¡Œå‰åŽæ‰§è¡Œè‡ªå®šä¹‰ Python è„šæœ¬ã€‚
- **è°ƒè¯•æ¨¡å¼**ï¼šé€æ­¥æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¾¿äºŽç²¾å‡†æŽ’æŸ¥é—®é¢˜ã€‚
- **ç”¨ä¾‹æ‰§è¡Œ**ï¼šæ”¯æŒå•ä¸ªæˆ–æ‰¹é‡ç”¨ä¾‹çš„æ‰§è¡Œã€‚
- **å®šæ—¶ä»»åŠ¡**ï¼šå®šæ—¶æ‰§è¡ŒæŽ¥å£æµ‹è¯•ä»»åŠ¡ï¼Œé€‚ç”¨äºŽå®šæœŸæµ‹è¯•ã€‚
- **æŠ¥å‘Šå±•ç¤º**ï¼šè‡ªåŠ¨ç”Ÿæˆå¹¶å±•ç¤º HTML æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šï¼Œæ˜Žç¡®æ˜¾ç¤ºæˆåŠŸä¸Žå¤±è´¥çš„è¯¦ç»†ä¿¡æ¯ã€‚
- **å®žæ—¶æ—¥å¿—å¯è§†åŒ–**ï¼šåœ¨æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­å®žæ—¶å±•ç¤ºæ—¥å¿—ï¼Œä¾¿äºŽè¿›åº¦ç›‘æŽ§ã€‚
- **æŽ¥å£å½•åˆ¶ï¼ˆæœªå®Œå–„ï¼‰**ï¼šå½•åˆ¶æŽ¥å£è¯·æ±‚å¹¶å¿«é€Ÿç”Ÿæˆå¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚ï¼ˆè®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­å®žçŽ°ï¼‰

### UI è‡ªåŠ¨åŒ–åŠŸèƒ½

âœ¨ **Playwright é›†æˆ**ï¼š

- **UI è‡ªåŠ¨åŒ–æ”¯æŒ**ï¼šé›†æˆäº† Playwrightï¼Œèƒ½å¤Ÿæ‰§è¡Œæµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œç•Œé¢ã€‚
- **æ­¥éª¤å½•å…¥**ï¼šæ”¯æŒåœ¨ UI æµ‹è¯•ä¸­å½•å…¥æµ‹è¯•æ­¥éª¤ï¼Œä¾¿äºŽå¿«é€Ÿåˆ›å»ºæµ‹è¯•ç”¨ä¾‹ã€‚
- **å‰åŽç½®æŽ¥å£è¯·æ±‚**ï¼šæ¯ä¸ªæ­¥éª¤å¯ä¸Žå‰åŽç½®æŽ¥å£è¯·æ±‚ç»“åˆï¼ŒåŠ¨æ€è°ƒæ•´æµ‹è¯•æµç¨‹ã€‚
- **å…¨å±€å˜é‡**ï¼šæ”¯æŒå…¨å±€å˜é‡çš„ç®¡ç†ï¼Œæ­¥éª¤å’Œè¯·æ±‚ä¸­çš„å˜é‡å¯ä»¥å…¨å±€å…±äº«ï¼Œæ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ã€‚
- **å…¬å…±æ­¥éª¤ç¼–è¾‘**ï¼šæ”¯æŒåˆ›å»ºå’Œç®¡ç†å…¬å…±æ­¥éª¤ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå‡å°‘å†—ä½™ï¼Œæå‡æ•ˆçŽ‡ã€‚
- **ä»»åŠ¡ç®¡ç†**ï¼šä¸ŽæŽ¥å£æµ‹è¯•ç±»ä¼¼ï¼ŒUI æµ‹è¯•ä»»åŠ¡æ”¯æŒå®šæ—¶æ‰§è¡Œä¸Žç»“æžœæŽ¨é€ï¼Œæ”¯æŒä¼ä¸šå¾®ä¿¡ç­‰æŽ¨é€æ–¹å¼ã€‚
- **SQL æ”¯æŒï¼ˆæœªå®Œæˆï¼‰**ï¼šè®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ”¯æŒ SQL æ“ä½œï¼Œå¢žå¼ºæ•°æ®å¤„ç†èƒ½åŠ›ã€‚
- **IF æ¡ä»¶åˆ¤æ–­æ‰§è¡Œ**ï¼šæ”¯æŒæ ¹æ®æ¡ä»¶åˆ¤æ–­æ‰§è¡Œç‰¹å®šæ­¥éª¤ï¼Œçµæ´»æŽ§åˆ¶æµ‹è¯•æµç¨‹ã€‚

---

## ðŸ–¥ï¸ UI å±•ç¤º

#### [å‰ç«¯é¡¹ç›®åœ°å€](https://github.com/Caoyongqi912/caseHubWeb)

### ðŸ“Š é¦–é¡µæ•°æ®å±•ç¤º

![index](resource/index.png)

### ðŸ“Š **API åˆ—è¡¨**

å±•ç¤ºæ‰€æœ‰æŽ¥å£çš„æ¦‚è§ˆï¼š

![APIåˆ—è¡¨](resource/api.png)

---

### ðŸ” **API è¯¦æƒ…**

***æŸ¥çœ‹å•ä¸ªæŽ¥å£çš„è¯¦ç»†ä¿¡æ¯***

![APIè¯¦æƒ…](resource/detail.png)

---

***å‰ç½®æ“ä½œ***

![å‰ç½®](resource/before1.png)

![å‰ç½®](resource/before2.png)

![å‰ç½®](resource/before3.png)

---

***å“åº”æå–***

![extract](resource/extract.png)

***æ–­è¨€***

![assert](resource/assert.png)

**è¯·æ±‚å˜é‡å†™å…¥**

![assert](resource/var1.png)
![assert](resource/var0.png)
æ”¯æŒ

- url
- header
- query
- body
- exec sql

### ðŸ–±ï¸ **APITry**

æ”¯æŒåœ¨ UI ä¸­ç›´æŽ¥æ‰§è¡ŒæŽ¥å£è¯·æ±‚ï¼Œå¿«é€ŸéªŒè¯ API å¯ç”¨æ€§ï¼š

![APITry](resource/try.gif)

---

### âž• **Case æ·»åŠ  API**

æ”¯æŒï¼š

- æ·»åŠ å…¬å…± API
- æ‰‹åŠ¨å½•å…¥ API
- æ·»åŠ API GROUP
- API æ‰§è¡Œæ‹–æ‹½æŽ’åº
- æ”¯æŒåŸºæœ¬çš„ CRUD æ“ä½œ

![Caseæ·»åŠ API](resource/caseAdd.gif)

---

### âš¡ **RunCase æ‰§è¡Œç”¨ä¾‹**

- **åŒæ­¥æ‰§è¡Œ**ï¼šå®žæ—¶å±•ç¤ºæµ‹è¯•æ—¥å¿—ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤éƒ½å¯ç›‘æŽ§ã€‚
  ![RunCase](resource/runBySync.gif)

- **åŽå°æ‰§è¡Œ & è½®è¯¢ç»“æžœ**ï¼šé€‚ç”¨äºŽé•¿æœŸä»»åŠ¡æˆ–éœ€è¦åœ¨åŽå°æ‰§è¡Œçš„æµ‹è¯•ã€‚
  ![RunCase](resource/runByAsync.gif)

---

### ðŸ“… **Task æŽ¥å£ä»»åŠ¡**

ä»»åŠ¡å¯å…³è”å¤šä¸ª API ç”¨ä¾‹ï¼Œæ”¯æŒï¼š

- å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
- æ‰§è¡Œç»“æžœæŽ¨é€ï¼ˆç›®å‰æ”¯æŒä¼ä¸šå¾®ä¿¡ï¼‰

![TaskæŽ¥å£ä»»åŠ¡](resource/task_detail.png)

---

### ðŸ“ˆ **Task ä»»åŠ¡æŠ¥å‘Š**

ç”Ÿæˆå¹¶å±•ç¤ºä»»åŠ¡æ‰§è¡ŒåŽçš„è¯¦ç»†æŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜Ÿäº†è§£æµ‹è¯•çŠ¶æ€ã€‚

![Report](resource/report.png)

## UIè‡ªåŠ¨åŒ–

- æ”¯æŒé…ç½®æ–¹æ³•ã€çŽ¯å¢ƒã€å…¬å…±æ­¥éª¤ã€æ“ä½œä»»åŠ¡çš„è°ƒåº¦
- UIæ‰§è¡Œæ­¥éª¤å‰åŽç½®æŽ¥å£è¯·æ±‚ã€SQL(æœªå®Œæˆ) IF æ¡ä»¶åˆ¤æ–­æ‰§è¡Œ
- æ­¥éª¤æ‹–æ‹½æŽ’åºã€

![ui](resource/ui_detail.gif)


---

## ðŸ› ï¸ å®‰è£…ä¸Žä½¿ç”¨

### å®‰è£…ä¾èµ–

1. å…‹éš†é¡¹ç›®

2. ç¼–å†™config

    - é…ç½®è‡ªå·±çš„æ•°æ®åº“ç­‰ç›¸å…³å†…å®¹
        - config.py
        - ä¸»è¦æ˜¯ä¸‹é¢ æŒ‰ç…§æœ¬åœ°æƒ…å†µè‡ªå®šä¹‰

```python
class LocalConfig(BaseConfig):
    SERVER_HOST: str = "127.0.0.1"
    SERVER_PORT: int = 5050
    DOMAIN = f"http://{SERVER_HOST}:{SERVER_PORT}"
    UI_Headless = True
    UI_Timeout = 5000
    UI_SLOW = 500
    UI_ERROR_PATH = DOMAIN + "/file/ui_case/uid="
    FILE_AVATAR_PATH = DOMAIN + "/file/avatar/uid="
    APS = False
    Record_Proxy = False
    MYSQL_SERVER = "127.0.0.1"
    MYSQL_PASSWORD = "your password"
    SQLALCHEMY_DATABASE_URI = 'mysql+mysqlconnector://{}:{}@{}:{}/{}'.format(
        'root', MYSQL_PASSWORD, MYSQL_SERVER, BaseConfig.MYSQL_PORT, BaseConfig.MYSQL_DATABASE)

    ASYNC_SQLALCHEMY_URI = f'mysql+aiomysql://root:{MYSQL_PASSWORD}'
    f'@{MYSQL_SERVER}:{BaseConfig.MYSQL_PORT}/{BaseConfig.MYSQL_DATABASE}'


# UI_TASK_URL = f"{DOMAIN}:{BaseConfig.STRUCTURE_WEB_SERVER_PORT}/ui/task/detail/taskId="
# UI_REPORT_URL = f"{DOMAIN}:{BaseConfig.STRUCTURE_WEB_SERVER_PORT}/report/history/uiTask/detail/uid="

REDIS_DB = 0
REDIS_SERVER = "127.0.0.1"
REDIS_URL: str = f"redis://{REDIS_SERVER}:{BaseConfig.REDIS_PORT}/{REDIS_DB}"

# å®šæ—¶ä»»åŠ¡Stores
APSJobStores = {
    'default': RedisJobStore(
        db=2,  # Redis æ•°æ®åº“ç¼–å·
        jobs_key='apscheduler.jobs',  # å­˜å‚¨ä»»åŠ¡çš„é”®
        run_times_key='apscheduler.run_times',  # å­˜å‚¨ä»»åŠ¡è¿è¡Œæ—¶é—´çš„é”®
        host=REDIS_SERVER,  # Redis æœåŠ¡å™¨åœ°å€
        port=BaseConfig.REDIS_PORT,  # Redis æœåŠ¡å™¨ç«¯å£
        password=None  # Redis å¯†ç ï¼ˆå¦‚æžœæ²¡æœ‰å¯†ç ï¼Œè®¾ç½®ä¸º Noneï¼‰
    ),

}
# oracle client 
CX_Oracle_Client_Dir = "/your/instantclient_23_3"

```

3. å®‰è£…æ‰€éœ€ä¾èµ–ï¼š

    ```bash
    pip install -r requirements.txt
    ```

4ã€å®‰è£…mysql ã€ redis

5ã€è¿è¡Œ

- æŸ¥çœ‹main.py
    - `init_aps` å®šæ—¶ä»»åŠ¡å¼€å¯
    - `init_db` åˆ›å»ºè¡¨
    - `init_proxy` å¼€å¯ä»£ç† ï¼ˆæš‚æ—¶ä¸ç”¨å¼€ï¼Œé…ç½®å…³é—­å°±å¥½ï¼‰
    - `init_redis` é…åˆ proxy ä½¿ç”¨ ä¹Ÿå¯ä¸ç”¨å¼€
- æ‰§è¡Œ run.py
- æ·»åŠ adminç”¨æˆ· è§è¿™ä¸ªæŽ¥å£
```python
@router.post(path="/registerAdmin", description="æ·»åŠ ç®¡ç†")
async def register_admin(user: RegisterAdmin) -> Response:
    await UserMapper.register_admin(**user.dict())
    return Response.success()
```

6ã€å‰ç«¯éƒ¨ç½²è§ [å‰ç«¯é¡¹ç›®](https://github.com/Caoyongqi912/caseHubWeb)


> å­˜åœ¨ç–‘é—®ï¼Ÿè”ç³»æˆ‘
>
![](resource/wx.png)



#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/6/20# @Author : cyq# @File : project# @Software: PyCharm# @Desc:from sqlalchemy import Column, String, INTEGER, ForeignKey, Table, BOOLEAN, TEXTfrom app.model.basic import BaseModelfrom sqlalchemy.orm import relationshipprojectUser = Table(    "project_user", BaseModel.metadata,    Column("project_id", INTEGER, ForeignKey("project.id", ondelete='CASCADE'), primary_key=True),    Column("user_id", INTEGER, ForeignKey("user.id", ondelete='CASCADE'), primary_key=True))class Project(BaseModel):    __tablename__ = "project"    title = Column(String(20), unique=True, comment="项目名称")    description = Column("description", String(100), nullable=True, comment="项目描述")    chargeId = Column(INTEGER, comment="项目负责人ID")    chargeName = Column(String(20), nullable=True, comment="项目负责人姓名")    # 用户跟项目是 多对多 绑定    users = relationship("User", backref="project", lazy="dynamic",                         secondary=projectUser)class GlobalVariable(BaseModel):    """全局变量"""    __tablename__ = 'global_variable'    key = Column(String(40), nullable=False, unique=True, comment="key")    value = Column(TEXT, nullable=False, comment="value")    description = Column(String(100), nullable=True, comment="描述")    project_id = Column(INTEGER, ForeignKey('project.id', ondelete="cascade"),                        nullable=False, comment="所属项目")    @property    def map(self) -> dict:        return {self.key: self.value}    def __repr__(self):        return (            f"<GlobalVariable(key='{self.key}', value='{self.value}' project={self.project_id})>"        )
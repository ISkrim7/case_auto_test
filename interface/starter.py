#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/12/6# @Author : cyq# @File : io_sender# @Software: PyCharm# @Desc:from app.model.base import Userfrom enums import StarterEnumfrom utils import GenerateTools, MyLogurufrom app.ws import async_iofrom utils.io_sender import SocketSenderlog = MyLoguru().get_logger()Event = "api_message"NS = "/api_namespace"class APIStarter(SocketSender):    uid: str = None    userId: int = None    def __init__(self, user: User | StarterEnum):        self.logs = []        super().__init__(event=Event, user=user, ns=NS)    async def send(self, msg: str):        """        å¼‚æ­¥å‘é€æ¶ˆæ¯æ–¹æ³•ã€‚        è¯¥æ–¹æ³•è´Ÿè´£æ ¼å¼åŒ–æ¶ˆæ¯å¹¶å°†å…¶å‘é€ç»™ç”¨æˆ·ã€‚å®ƒé¦–å…ˆä¼šå°è¯•æ ¼å¼åŒ–æ¶ˆæ¯ï¼Œ        ç„¶åè®°å½•æ—¥å¿—ï¼Œä¿å­˜æ¶ˆæ¯è®°å½•ï¼Œå¹¶é€šè¿‡å¼‚æ­¥I/Oå‘é€æ¶ˆæ¯ã€‚å¦‚æœåœ¨è¿‡ç¨‹ä¸­        å‡ºç°ä»»ä½•å¼‚å¸¸ï¼Œå®ƒä¼šè®°å½•é”™è¯¯ä¿¡æ¯ã€‚        å‚æ•°:        - msg (str): éœ€è¦å‘é€çš„æ¶ˆæ¯å†…å®¹ã€‚        è¿”å›:        æ— è¿”å›å€¼ã€‚        """        try:            # æ ¼å¼åŒ–æ¶ˆæ¯ï¼Œæ·»åŠ æ—¶é—´æˆ³ã€‚            msg = f"{GenerateTools.getTime(1)} ğŸš€ ğŸš€  {msg}"            # ä½¿ç”¨å¼‚æ­¥I/Oå‘é€æ¶ˆæ¯ã€‚            return await super().send(msg)        except Exception as e:            # è®°å½•å‘é€è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ã€‚            log.error(e)